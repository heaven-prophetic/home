<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sermons â€“ Heaven Prophetic</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #sideMenu {
      transition: transform 0.3s ease-in-out;
      transform: translateX(-100%);
    }
    #sideMenu.open {
      transform: translateX(0);
    }
  </style>
</head>
<body class="bg-white text-gray-900 font-sans">

   <!-- Header -->
  <header class="bg-yellow-400 py-4 shadow flex justify-between items-center px-4">
    <div>
  <a href="index.html" class="text-xl font-bold text-red-700 block">Heaven Prophetic Deliverance Ministry</a>
  <p class="text-sm text-red-800">22 Harris Street, May Pen, Clarendon, Jamaica</p>
  <p class="text-sm text-red-800">ðŸ“ž (876) 212-5944</p>
</div>
    <button id="menuBtn" class="md:hidden text-red-700 text-2xl">â˜°</button>
  
  <!-- Desktop Menu -->    
    <nav id="menu" class="hidden md:flex gap-4 text-red-800 font-semibold">
      <a href="index.html" class="text-red-800 hover:underline">Home</a>
      <a href="about.html" class="text-red-800 hover:underline">About</a>
      <a href="ministries.html" class="text-red-800 hover:underline">Ministries</a>
      <a href="sermons.html" class="text-red-800 hover:underline">Sermons</a>
      <a href="events.html" class="text-red-800 hover:underline">Events</a>
      <a href="prayer.html" class="text-red-800 hover:underline">Prayer</a>
    </nav>

    </header>

  <!-- Slide-In Menu -->
  <nav id="sideMenu" class="fixed top-0 left-0 w-3/4 h-full bg-yellow-200 shadow-lg p-6 z-50 md:hidden">
    <button id="closeMenu" class="text-xl mb-4 text-red-700">âœ– Close</button>
    <ul class="space-y-4 text-lg font-semibold text-red-800">
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="ministries.html">Ministries</a></li>
      <li><a href="sermons.html">Sermons</a></li>
      <li><a href="events.html">Events</a></li>
      <li><a href="prayer.html">Prayer</a></li>
    </ul>
  </nav>

  <main class="max-w-4xl mx-auto py-12 px-6">
    <h1 class="text-3xl font-bold text-red-700 mb-6">Latest Sermon</h1>
    <ul id="sermonList" class="space-y-6"></ul>
  </main>
      
<!-- Facebook SDK (for live/embed) -->
<div id="fb-root"></div>
<script async defer crossorigin="anonymous"
  src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v18.0" nonce="live123">
</script>

<script>
fetch('data/sermons.json')
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById('sermonList');
    data.forEach(sermon => {
      const li = document.createElement('li');

      // YouTube embed
      let youtubeEmbed = '';
if (sermon.youtube) {
  let videoId = '';

  if (sermon.youtube.includes('youtu.be/')) {
    // Handle short YouTube URLs like https://youtu.be/AwJhgLwO1yA
    videoId = sermon.youtube.split('youtu.be/')[1]?.split('?')[0];
  } else if (sermon.youtube.includes('watch?v=')) {
    // Handle full YouTube URLs like https://www.youtube.com/watch?v=AwJhgLwO1yA
    videoId = sermon.youtube.split('v=')[1]?.split('&')[0];
  }

  if (videoId) {
    youtubeEmbed = `
      <iframe class="my-4 w-full max-w-xl" height="315"
        src="https://www.youtube.com/embed/${videoId}"
        title="YouTube video"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen></iframe>`;
  }
}

      // Facebook embed
      let facebookEmbed = '';
      if (sermon.live && sermon.facebook) {
        facebookEmbed = `
          <div class="fb-video my-4"
            data-href="${sermon.facebook}"
            data-width="500"
            data-show-text="false"
            data-autoplay="true"></div>`;
      } else if (sermon.facebook) {
        facebookEmbed = `<p><a href="${sermon.facebook}" target="_blank" class="text-blue-600 underline">ðŸ“˜ Watch on Facebook</a></p>`;
      }

      li.innerHTML = `
        <div class="border-l-4 border-yellow-600 pl-4 py-3">
          <h2 class="text-xl font-bold text-red-700">${sermon.title}</h2>
          <p><strong>Date:</strong> ${sermon.date}</p>
          <p><strong>Time:</strong> ${sermon.time}</p>
          <p><strong>Speaker:</strong> ${sermon.speaker}</p>
          ${youtubeEmbed}
          ${facebookEmbed}
          ${sermon.content ? `<p>${sermon.content}</p>` : ''}
        </div>
      `;
      container.appendChild(li);
    });
  });
</script>


  <script>
    const menu = document.getElementById("sideMenu");
    document.getElementById("menuBtn").onclick = () => menu.classList.add("open");
    document.getElementById("closeMenu").onclick = () => menu.classList.remove("open");
  </script>
</body>
</html>
